{"version":3,"file":"/packages/famous.js","sources":["famous/include.js","famous/famousHelpers.js"],"names":[],"mappings":";;;;;;;;AAAA,mC;AACA,0C;AACA,gD;AACA,mB;AACA,yB;AACA,+B;AACA,gD;AACA,I;AACA,oC;AACA,C;;AAEA,U;AACA,gC;AACA,4B;AACA,uC;AACA,+C;AACA,wC;AACA,mB;AACA,O;AACA,I;AACA,sB;AACA,0B;AACA,yB;AACA,iC;AACA,wC;AACA,oB;AACA,S;AACA,M;AACA,G;AACA,C;;;;;;;;;;;;;;;;;;;AC7BA,kB;;AAEA,iC;;AAEA,yC;;AAEA,O;AACA,c;AACA,2C;AACA,S;AACA,2B;AACA,E;AACA,8B;AACA,U;AACA,6B;AACA,0B;AACA,S;AACA,2C;AACA,8C;AACA,kC;AACA,G;AACA,E;AACA,8C;AACA,wB;;AAEA,4B;AACA,e;AACA,qB;AACA,e;AACA,I;;AAEA,iC;AACA,yB;AACA,6B;AACA,uC;AACA,mC;AACA,O;AACA,K;AACA,G;;AAEA,sB;AACA,wC;AACA,wB;AACA,G;;AAEA,iB;AACA,C;;AAEA,sD;AACA,kB;AACA,kD;AACA,kD;AACA,M;AACA,4D;AACA,0D;AACA,4C;AACA,M;AACA,+C;AACA,8B;AACA,M;AACA,6D;AACA,8C;AACA,oC;AACA,K;AACA,K;AACA,C;;AAEA,sC;AACA,4C","sourcesContent":["function loadScript(name, onload) {\n  var src = Famous._basePath + '/' + name;\n  var script = document.createElement(\"script\");\n  script.src = src;\n  script.onload = onload;\n  script.onerror = function() {\n    console.log('Famous: Error fetching ' + src)\n  };\n  document.head.appendChild(script);\n}\n\nFamous = {\n  _basePath: '/packages/famous',\n  load: function(callback) {\n    loadScript('build.js', function() {\n      // done loading and configuring requirejs\n      if (typeof callback == 'function')\n        callback();\n    });\n  },\n  main: function(cb) {\n    this.load(function() {\n      // famous is loaded\n      Meteor.startup(function() {\n        var foo = require(['index.js']);\n        cb(require);\n      });\n    })\n  }\n}\n","famousHelpers = {}\n\nvar createSurface = function(s) {\n\n\tvar Surface = require(\"famous/surface\");\n\n\tvar r;\n\tif (s.data) {\n\t\tr = UI.renderWithData(s.content, s.data);\n\t} else {\n\t\tr = UI.render(s.content);\n\t}\n\thtmlNodes = r.dom.getNodes();\n\tvar node;\n\tif (htmlNodes.length == 3) {\n\t\tnode = r.dom.members[1];\n\t} else {\n\t\tvar node = document.createElement(\"div\");\n\t\tfor (var i = 1; i < htmlNodes.length; i++) {\n\t\t\tnode.appendChild(htmlNodes[i]);\n\t\t}\n\t}\n  // var node = document.createElement(\"div\");\n  // UI.insert(r, node);\n\n\tvar surface = new Surface({\n\t\tsize: s.size,\n\t\tclasses: s.classes,\n\t\tcontent: node\n\t});\n\n  // attach events to the surface\n  if (s.events != null) {\n    for (var k in s.events) {\n      if (s.events.hasOwnProperty(k)) {\n        surface.on(k, s.events[k]);\n      }\n    }\n  }\n\n  // Rendered callback\n  if (typeof s.rendered == \"function\") {\n    s.rendered($(node));\n  }\n\n  return surface;\n}\n\nvar cursorToArray = function(cursor, data, createFn) {\n  cursor.observe({\n    addedAt: function(document, atIndex, before) {\n      data.splice(atIndex, 0, createFn(document));\n    },\n    changedAt: function(newDocument, oldDocument, atIndex) {\n      // ensure the fragment createFn returns is re-active\n      data[atIndex] = createFn(newDocument);\n    },\n    removedAt: function(oldDocument, atIndex) {\n      data.splice(atIndex, 1);\n    },\n    movedTo: function(document, fromIndex, toIndex, before) {\n      var item = data.splice(fromIndex, 1)[0];\n      data.splice(toIndex, 0, item);\n    }\n  });\n}\n\nfamousHelpers.Surface = createSurface;\nfamousHelpers.cursorToArray = cursorToArray;"]}